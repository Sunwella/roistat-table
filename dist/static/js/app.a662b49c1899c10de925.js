webpackJsonp([1],{"9M+g":function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),s=n("Gu7T"),i=n.n(s),l={props:["columns","items","keyField","parentKeyField"],data:function(){return{whichItemsOpen:[],sortedColName:null,sortIsAsc:!1}},methods:{createRow:function(e,t){var n=this;return this.$createElement("b-tr",this.columns.map(function(o){return n.createTD(e,o.key,t)}))},createTD:function(e,t,n){var o=this;return this.$createElement("b-td",this.$scopedSlots["cell("+t+")"]?this.$scopedSlots["cell("+t+")"]({item:e,hasChildren:this.hasChildren(e),isExpanded:this.isExpanded(e),toggleExpand:function(){return o.toggleExpand(e)},depth:n}):e[t])},getKey:function(e){return e[this.keyField]},getParentKey:function(e){return e[this.parentKeyField]},sort:function(e){this.sortIsAsc=this.sortedColName!==e||!this.sortIsAsc,this.sortedColName=e},hasChildren:function(e){return this.getKey(e)in this.childrenItems},createRootAndChildrenRows:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=[];return o.push(this.createRow(e,n)),this.hasChildren(e)&&this.isExpanded(e)&&this.childrenItems[this.getKey(e)].forEach(function(e){o.push(t.createRootAndChildrenRows(e,n+1))}),o},isExpanded:function(e){return this.whichItemsOpen.includes(this.getKey(e))},toggleExpand:function(e){if(this.isExpanded(e)){var t=this.whichItemsOpen.indexOf(this.getKey(e));this.whichItemsOpen.splice(t,1)}else this.whichItemsOpen.push(this.getKey(e))}},computed:{rootItems:function(){var e=this;return this.sortedTable.filter(function(t){return null===e.getParentKey(t)})},childrenItems:function(){var e=this,t={},n=void 0;return this.sortedTable.forEach(function(o){(n=e.getParentKey(o))in t||(t[n]=[]),n===e.getParentKey(o)&&t[n].push(o)}),t},sortedTable:function(){var e=this;return[].concat(i()(this.items)).sort(function(t,n){return e.sortIsAsc?t[e.sortedColName]>n[e.sortedColName]?1:-1:t[e.sortedColName]<n[e.sortedColName]?1:-1})}},render:function(){var e=this;return this.$createElement("b-table-simple",[this.$createElement("b-tr",this.columns.map(function(t){return e.$createElement("b-th",{on:{click:function(){return e.sort(t.key)}}},t.label)})),this.rootItems.map(function(t){return e.createRootAndChildrenRows(t)})])}},r=n("VU/8")(l,null,!1,null,null,null).exports,a={props:["isShown","employees"],created:function(){this.options=[].concat(i()(this.employees)),this.options.unshift({id:null,name:"Нет начальника"}),this.newEmployee.id=this.options[this.options.length-1].id+1},data:function(){return{newEmployee:{id:null,name:"",phone:"",bossId:null},options:[]}},methods:{saveNewEmployee:function(){this.$emit("save",this.newEmployee)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{title:"Добавление пользователя","hide-footer":""},model:{value:e.isShown,callback:function(t){e.isShown=t},expression:"isShown"}},[n("div",[n("b-form-group",{attrs:{id:"input-group-1",label:"Имя:","label-for":"input-1"}},[n("b-form-input",{attrs:{id:"input-1",placeholder:"Введите имя",required:""},model:{value:e.newEmployee.name,callback:function(t){e.$set(e.newEmployee,"name",t)},expression:"newEmployee.name"}})],1),e._v(" "),n("b-form-group",{attrs:{id:"input-group-2",label:"Телефон:","label-for":"input-2"}},[n("b-form-input",{attrs:{id:"input-2",placeholder:"Введите телефон",required:""},model:{value:e.newEmployee.phone,callback:function(t){e.$set(e.newEmployee,"phone",t)},expression:"newEmployee.phone"}})],1),e._v(" "),n("b-form-group",{attrs:{id:"input-group-3",label:"Начальник:","label-for":"input-3"}},[n("b-form-select",{attrs:{id:"input-3",options:e.options,"text-field":"name","value-field":"id"},model:{value:e.newEmployee.bossId,callback:function(t){e.$set(e.newEmployee,"bossId",t)},expression:"newEmployee.bossId"}})],1),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:e.saveNewEmployee}},[e._v("Сохранить")])],1)])},staticRenderFns:[]},c=n("VU/8")(a,u,!1,null,null,null).exports,p=n("mvHQ"),d=n.n(p);function h(){var e=localStorage.getItem("employees");return null==e?[]:JSON.parse(e)}var m={created:function(){this.employees=h()},components:{Table:r,NewEmployeeModal:c},data:function(){return{employees:[],modalIsShown:!1}},methods:{onEmployeeSave:function(e){!function(e){var t=h();t.push(e),localStorage.setItem("employees",d()(t))}(e),this.modalIsShown=!1,this.employees=h()}},computed:{columns:function(){return[{key:"name",label:"Имя"},{key:"phone",label:"Телефон"}]}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("b-container",[n("b-button",{staticClass:"my-5",on:{click:function(t){e.modalIsShown=!e.modalIsShown}}},[e._v("Добавить")]),e._v(" "),e.modalIsShown?[n("NewEmployeeModal",{attrs:{"is-shown":e.modalIsShown,employees:e.employees},on:{save:e.onEmployeeSave}})]:e._e(),e._v(" "),n("Table",{attrs:{columns:e.columns,items:e.employees,"key-field":"id","parent-key-field":"bossId"},scopedSlots:e._u([{key:"cell(name)",fn:function(t){var o=t.item,s=t.hasChildren,i=t.isExpanded,l=t.toggleExpand,r=t.depth;return[n("div",{style:{marginLeft:2*r+"em"}},[s?n("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:l}},[e._v("\n            "+e._s(i?"-":"+")+"\n          ")]):e._e(),e._v("\n          "+e._s(o.name)+"\n        ")],1)]}}])})],2)],1)},staticRenderFns:[]},y=n("VU/8")(m,f,!1,null,null,null).exports,b=n("Tqaz");n("Jmt5"),n("9M+g");o.default.use(b.a),o.default.config.productionTip=!1,new o.default({el:"#app",components:{App:y},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.a662b49c1899c10de925.js.map